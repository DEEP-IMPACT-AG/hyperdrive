AWSTemplateFormatVersion: '2010-09-09'
Description: Test Hyperdrive installation
Parameters:
  HyperdriveCore:
    Type: String
    Default: HyperdriveCoreTest
Resources:
  LogGroupEuWest1:
    Type: Custom::LogGroup
    Properties:
      ServiceToken:
        Fn::ImportValue:
          !Sub ${HyperdriveCore}-LogGroup
      LogGroupName: {{.LogGroupName}}
      {{.RegionEuWest1Property}}
      {{.RetentionProperty}}
      Tags:
        test: {{.TagValue}}
  LogGroupUsEast1:
    Type: Custom::LogGroup
    Properties:
      ServiceToken:
        Fn::ImportValue:
          !Sub ${HyperdriveCore}-LogGroup
      LogGroupName: {{.LogGroupName}}
      Region: us-east-1
      {{.RetentionProperty}}
      Tags:
        test: {{.TagValue}}
Outputs:
  LogGroupEuWest1Arn:
    Value: !GetAtt LogGroupEuWest1.Arn
    Export:
      Name: !Sub ${AWS::StackName}-LogGroupEuWest1Arn
  LogGroupUsEast1Arn:
      Value: !GetAtt LogGroupUsEast1.Arn
      Export:
        Name: !Sub ${AWS::StackName}-LogGroupUsEast1Arn